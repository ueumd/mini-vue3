<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<div>
  <div>count: <span id="myCount">{{ count }}</span></div>
  <div>msg: <span id="msgBox">{{ msg }}</span></div>
  <div>vue: <span id="vueBox">{{ lang.vue }}</span></div>

  <button id="setCount">修改count值</button>
  <button id="updateMsgValueBtn">修改msg值</button>
  <button id="setVue">修改Vue的值</button>
</div>

<script type="module">
  import { effect, reactive, ref } from '../index.js'

  let count = (window.count = ref(100))

  const state = reactive({
    msg: Date.now(),
    lang: {
      vue: '3.0'
    }
  })

  window.state = state

  effect(() => {
    // console.log('count:', count.value)
    myCount.innerText = count.value
  })

  // 默认执行一次
  effect(() => {
    msgBox.innerText = state.msg
  })
  effect(() => {
    vueBox.innerText = state.lang.vue
  })

  // 定义一个使用到响应式数据的 dom更新函数
  updateMsgValueBtn.onclick = function () {
    state.msg = Date.now()
    console.log(state)
  }

  // 点击触发数据更新
  setVue.onclick = function () {
    state.lang.vue = 'vue-next ' + Date.now()
  }

  setCount.onclick = function () {
    count.value = Date.now()
  }

</script>
</body>
</html>
